---
title: LV10-changesets
date: 2025-09-03 19:30:53
icon: famicons:logo-markdown
permalink: /sdoc/develop/126b07e425dd18a17fa41782
index: true
tags:
categories:
copyright: false
keywords:
cover:
comments:
mathjax:
top:
description:
tdoc:
  detailDate: 2025-09-03 19:30:53.394
  fulluuid: 17fa41782581414ea91dda82301287f3
  useduuid: 17fa41782
---

## ä¸€ã€Changesetsæ˜¯ä»€ä¹ˆ

### 1. ç®€ä»‹

Changesets æ˜¯ä¸€ä¸ªä¸“ä¸º monorepo é¡¹ç›®è®¾è®¡çš„ç‰ˆæœ¬ç®¡ç†å’Œå˜æ›´æ—¥å¿—ç”Ÿæˆå·¥å…·ã€‚ä¸ Standard-Version ä¸åŒï¼ŒChangesets é‡‡ç”¨æ‰‹åŠ¨åˆ›å»ºå˜æ›´é›†ï¼ˆchangesetï¼‰çš„æ–¹å¼ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿç²¾ç¡®æ§åˆ¶æ¯ä¸ªç‰ˆæœ¬åŒ…å«çš„å˜æ›´å†…å®¹ã€‚å®ƒç‰¹åˆ«é€‚åˆå¤šåŒ…ç®¡ç†çš„å¤æ‚é¡¹ç›®ï¼Œæä¾›æ›´çµæ´»çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ã€‚

Changesets çš„æ ¸å¿ƒæ€æƒ³æ˜¯"å˜æ›´é›†é©±åŠ¨"â€”â€”å¼€å‘è€…éœ€è¦æ‰‹åŠ¨åˆ›å»ºå˜æ›´é›†æ–‡ä»¶æ¥æè¿°æ‰€åšçš„æ›´æ”¹ï¼Œç„¶åå·¥å…·ä¼šæ ¹æ®è¿™äº›å˜æ›´é›†è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·ã€ç”Ÿæˆå˜æ›´æ—¥å¿—ï¼Œå¹¶å¤„ç†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š

- åœ¨å¼€å‘æ—¶ï¼Œéœ€è¦å¼€å‘è€…æä¾›æœ¬æ¬¡å˜æ›´æ¶‰åŠçš„åŒ…åç§°ã€å‡çº§ç‰ˆæœ¬ç±»å‹ï¼ˆ`patch`ã€`minor`ã€`major`ï¼‰åŠå˜æ›´ä¿¡æ¯
- åœ¨å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œä¼šæ ¹æ®å˜æ›´é›†è‡ªåŠ¨å‡çº§å¯¹åº”åŒ…çš„ç‰ˆæœ¬å·ï¼Œå¹¶åœ¨å¯¹åº”çš„åŒ…ä¸­ç”Ÿæˆ `Changelog` ä¿¡æ¯
- åœ¨ `Monorepo` åœºæ™¯ä¸­ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä»“åº“ä¾èµ–å›¾ï¼Œå‡çº§æ—¶åªä¼šå‡çº§å˜æ›´åŒ…åŠç›¸å…³ä¾èµ–åŒ…çš„ç‰ˆæœ¬å·

### 2. ä¼šåšé‚£äº›äº‹ï¼Ÿ

åœ¨ç‰ˆæœ¬å‘å¸ƒè¿‡ç¨‹ä¸­ï¼ŒChangesets ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹å·¥ä½œï¼š

ï¼ˆ1ï¼‰**ç®¡ç†å˜æ›´é›†**ï¼šåˆ›å»ºå’Œç®¡ç† `.changeset` ç›®å½•ä¸‹çš„å˜æ›´é›†æ–‡ä»¶

ï¼ˆ2ï¼‰**ç‰ˆæœ¬æ›´æ–°**ï¼šæ ¹æ®å˜æ›´é›†å†…å®¹è‡ªåŠ¨æ›´æ–°å„ä¸ªåŒ…çš„ç‰ˆæœ¬å·

ï¼ˆ3ï¼‰**ç”Ÿæˆå˜æ›´æ—¥å¿—**ï¼šè‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–° CHANGELOG.md æ–‡ä»¶

ï¼ˆ4ï¼‰**ä¾èµ–ç®¡ç†**ï¼šå¤„ç† monorepo ä¸­åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»æ›´æ–°

ï¼ˆ5ï¼‰**å‘å¸ƒç®¡ç†**ï¼šæ”¯æŒé¢„å‘å¸ƒæ¨¡å¼å’Œæ­£å¼å‘å¸ƒæµç¨‹

### 3. ç›¸å…³ä¾èµ–

åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå®‰è£…ï¼š

```bash
npm install -D @changesets/cli
# æˆ–è€…ä½¿ç”¨ pnpm
pnpm add -D @changesets/cli
```

> [GitHub - changesets/changesets: ğŸ¦‹ A way to manage your versioning and changelogs with a focus on monorepos](https://github.com/changesets/changesets)

åˆå§‹åŒ– Changesetsï¼š

```bash
npx changeset init
```

![image-20250826202835500](./LV10-changesets/img/image-20250826202835500.png)

åˆå§‹åŒ–å®Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š

```bash
test
â”œâ”€â”€ .changeset
â”‚   â”œâ”€â”€ config.json
â”‚   â””â”€â”€ README.md
â””â”€â”€ ...
```

## äºŒã€åŸºæœ¬ç”¨æ³•ä¸é…ç½®

### 1. åŸºæœ¬ç”¨æ³•

åœ¨ package.json ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "cs": "changeset",
    "cs:version": "changeset version",
    "cs:release": "changeset publish",
    "cs:pre": "changeset pre enter",
    "cs:pre:exit": "changeset pre exit"
  }
}
```

**è„šæœ¬å‘½ä»¤è¯¦ç»†è¯´æ˜ï¼š**

#### 1.1 `cs` (`changeset`): äº¤äº’å¼åˆ›å»ºå˜æ›´é›†æ–‡ä»¶

##### 1.1.1 åŠŸèƒ½æè¿°

å¯åŠ¨äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ï¼Œå¼•å¯¼å¼€å‘è€…åˆ›å»ºå˜æ›´é›†æ–‡ä»¶ã€‚è¯¥å‘½ä»¤ä¼šé€æ­¥è¯¢é—®ä»¥ä¸‹ä¿¡æ¯ï¼š

- é€‰æ‹©å—å½±å“çš„åŒ…ï¼ˆåœ¨ monorepo ä¸­ä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨åŒ…ï¼‰
- é€‰æ‹©å˜æ›´ç±»å‹ï¼ˆmajor/minor/patchï¼‰
- å¡«å†™å˜æ›´æè¿°ä¿¡æ¯

##### 1.1.2 å·¥ä½œæµç¨‹

ï¼ˆ1ï¼‰è¿è¡Œå‘½ä»¤åï¼Œä¼šæ˜¾ç¤ºå½“å‰å·¥ä½œåŒºä¸­çš„æ‰€æœ‰åŒ…åˆ—è¡¨

> **åŒ…åˆ—è¡¨æ¥æº**ï¼šChangesets ä¼šè‡ªåŠ¨æ‰«æå·¥ä½œåŒºä¸­çš„ `package.json` æ–‡ä»¶ï¼Œæ ¹æ®ä»¥ä¸‹è§„åˆ™ç¡®å®šè¦æ˜¾ç¤ºçš„åŒ…ï¼š
>
> - åœ¨ monorepo ä¸­ï¼Œä¼šè¯»å– `pnpm-workspace.yaml` æˆ– `lerna.json` é…ç½®çš„å·¥ä½œåŒºèŒƒå›´
> - è¯†åˆ«æ‰€æœ‰åŒ…å«æœ‰æ•ˆ `name` å’Œ `version` å­—æ®µçš„ `package.json` æ–‡ä»¶
> - æ’é™¤æ ‡è®°ä¸º `private: true` çš„ç§æœ‰åŒ…
> - é»˜è®¤æƒ…å†µä¸‹ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯å‘å¸ƒçš„å…¬å…±åŒ…

ï¼ˆ2ï¼‰ä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©å—å½±å“çš„åŒ…ï¼ˆå¯å¤šé€‰ï¼‰

ï¼ˆ3ï¼‰ä¸ºæ¯ä¸ªé€‰ä¸­çš„åŒ…é€‰æ‹©ç‰ˆæœ¬å˜æ›´ç±»å‹

ï¼ˆ4ï¼‰è¾“å…¥è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆæ”¯æŒå¤šè¡Œ Markdown æ ¼å¼ï¼‰

ï¼ˆ5ï¼‰ç¡®è®¤åä¼šåœ¨ `.changeset` ç›®å½•ä¸‹ç”Ÿæˆæ–°çš„å˜æ›´é›†æ–‡ä»¶

##### 1.1.3 ç”Ÿæˆæ–‡ä»¶

åœ¨ `.changeset` ç›®å½•ä¸‹åˆ›å»ºéšæœºå‘½åçš„ Markdown æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºï¼š

```markdown
---
"package-name": patch/minor/major
---

å˜æ›´æè¿°å†…å®¹...
```

##### 1.1.4 æ³¨æ„äº‹é¡¹

- å˜æ›´é›†æ–‡ä»¶éœ€è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­
- æè¿°ä¿¡æ¯åº”è¯¥æ¸…æ™°è¯¦ç»†ï¼Œä¾¿äºåç»­ç”Ÿæˆå˜æ›´æ—¥å¿—
- å¯ä»¥å¤šæ¬¡è¿è¡Œæ­¤å‘½ä»¤ä¸ºä¸åŒçš„å˜æ›´åˆ›å»ºå¤šä¸ªå˜æ›´é›†

#### 1.2 `cs:version` (`changeset version`): æ ¹æ®å˜æ›´é›†æ›´æ–°ç‰ˆæœ¬å·

##### 1.2.1 åŠŸèƒ½æè¿°

è¯»å–æ‰€æœ‰æœªå¤„ç†çš„å˜æ›´é›†æ–‡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- æ›´æ–°ç›¸å…³åŒ…çš„ç‰ˆæœ¬å·ï¼ˆæ ¹æ®å˜æ›´é›†ä¸­æŒ‡å®šçš„ç±»å‹ï¼‰
- ç”Ÿæˆæˆ–æ›´æ–° CHANGELOG.md æ–‡ä»¶
- åˆ é™¤å·²å¤„ç†çš„å˜æ›´é›†æ–‡ä»¶

##### 1.2.2 å·¥ä½œæµç¨‹

ï¼ˆ1ï¼‰æ‰«æ `.changeset` ç›®å½•ä¸‹çš„æ‰€æœ‰å˜æ›´é›†æ–‡ä»¶

ï¼ˆ2ï¼‰è§£ææ¯ä¸ªæ–‡ä»¶ä¸­çš„åŒ…åå’Œç‰ˆæœ¬å˜æ›´ç±»å‹

ï¼ˆ3ï¼‰æŒ‰ç…§ semver è§„èŒƒæ›´æ–° package.json ä¸­çš„ç‰ˆæœ¬å·

ï¼ˆ4ï¼‰åœ¨å¯¹åº”åŒ…çš„ç›®å½•ä¸­ç”Ÿæˆ/æ›´æ–° CHANGELOG.md æ–‡ä»¶

ï¼ˆ5ï¼‰åˆ é™¤å·²å¤„ç†çš„å˜æ›´é›†æ–‡ä»¶

##### 1.2.3 å½±å“èŒƒå›´

- ä¿®æ”¹ package.json æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·
- åˆ›å»ºæˆ–æ›´æ–° CHANGELOG.md æ–‡ä»¶
- æ›´æ–°åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ç‰ˆæœ¬å·

##### 1.2.4 æ³¨æ„äº‹é¡¹

- æ­¤å‘½ä»¤ä¼šä¿®æ”¹æ–‡ä»¶ï¼Œå»ºè®®å…ˆæäº¤å½“å‰æ›´æ”¹
- å˜æ›´æ—¥å¿—çš„æ ¼å¼å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰
- å¯¹äº monorepoï¼Œä¼šè‡ªåŠ¨å¤„ç†åŒ…é—´çš„ä¾èµ–ç‰ˆæœ¬æ›´æ–°

#### 1.3 `cs:release` (`changeset publish`): å‘å¸ƒåŒ…åˆ° npm æ³¨å†Œè¡¨

##### 1.3.1 åŠŸèƒ½æè¿°

å‘å¸ƒæ‰€æœ‰ç‰ˆæœ¬å·å·²æ›´æ–°ä½†å°šæœªå‘å¸ƒçš„åŒ…åˆ° npm æ³¨å†Œè¡¨ã€‚

##### 1.3.2 å‘å¸ƒæœºåˆ¶

ï¼ˆ1ï¼‰**ç‰ˆæœ¬æ£€æŸ¥**ï¼šå¯¹æ¯”æœ¬åœ°åŒ…ç‰ˆæœ¬å’Œ npm ä¸Šçš„å·²å‘å¸ƒç‰ˆæœ¬

ï¼ˆ2ï¼‰**å‘å¸ƒæ¡ä»¶**ï¼šåªå‘å¸ƒæ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„åŒ…ï¼š

- ç‰ˆæœ¬å·æ¯” npm ä¸Šæ›´æ–°çš„åŒ…ï¼ˆæœ¬åœ°ç‰ˆæœ¬ > è¿œç¨‹ç‰ˆæœ¬ï¼‰
- æ–°åŒ…ï¼ˆä»æœªå‘å¸ƒè¿‡çš„åŒ…ï¼‰
- éç§æœ‰åŒ…ï¼ˆ`private` ä¸ä¸º `true`ï¼‰

ï¼ˆ3ï¼‰**ä¾èµ–å¤„ç†**ï¼šç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®å‘å¸ƒ

> **å‰ç½®è¦æ±‚ï¼š**
>
> - éœ€è¦å…ˆç™»å½• npmï¼š`npm login`
> - å…·æœ‰å¯¹åº”åŒ…çš„å‘å¸ƒæƒé™
> - ç½‘ç»œè¿æ¥æ­£å¸¸

##### 1.3.3 å‘å¸ƒæµç¨‹

ï¼ˆ1ï¼‰æ£€æŸ¥æ¯ä¸ªåŒ…çš„å‘å¸ƒçŠ¶æ€

ï¼ˆ2ï¼‰æ„å»ºåŒ…ï¼ˆå¦‚æœé…ç½®äº†æ„å»ºè„šæœ¬ï¼‰

ï¼ˆ3ï¼‰å‘å¸ƒåˆ° npm æ³¨å†Œè¡¨

ï¼ˆ4ï¼‰æ›´æ–°å‘å¸ƒçŠ¶æ€ä¿¡æ¯

##### 1.3.4 æ³¨æ„äº‹é¡¹

- å¯¹äº `@scope/package` å½¢å¼çš„åŒ…ï¼Œé»˜è®¤éœ€è¦ç»„ç»‡æƒé™
- å¯ä»¥é€šè¿‡ `publishConfig.access` é…ç½®å‘å¸ƒæƒé™
- å‘å¸ƒå‰å»ºè®®å…ˆè¿›è¡Œæœ¬åœ°æµ‹è¯•

#### 1.4 `cs:pre` (`changeset pre enter`): è¿›å…¥é¢„å‘å¸ƒæ¨¡å¼

##### 1.4.1 åŠŸèƒ½æè¿°

åˆ‡æ¢åˆ°é¢„å‘å¸ƒçŠ¶æ€ï¼Œåç»­çš„ç‰ˆæœ¬å·ä¼šæ·»åŠ é¢„å‘å¸ƒæ ‡è¯†ï¼ˆå¦‚ alphaã€betaã€rcï¼‰ã€‚

é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

- åŠŸèƒ½å¼€å‘å®Œæˆï¼Œéœ€è¦è¿›è¡Œå†…éƒ¨æµ‹è¯•
- é‡å¤§å˜æ›´éœ€è¦æ”¶é›†ç”¨æˆ·åé¦ˆ
- å‘å¸ƒå€™é€‰ç‰ˆæœ¬è¿›è¡Œæœ€ç»ˆéªŒè¯

##### 1.4.2 ä½¿ç”¨æ–¹æ³•

```bash
# è¿›å…¥ alpha é¢„å‘å¸ƒæ¨¡å¼
pnpm cs:pre alpha

# è¿›å…¥ beta é¢„å‘å¸ƒæ¨¡å¼
pnpm cs:pre beta

# è¿›å…¥ rc é¢„å‘å¸ƒæ¨¡å¼
pnpm cs:pre rc
```

##### 1.4.3 æ‰§è¡Œæ•ˆæœ

- è®¾ç½®é¢„å‘å¸ƒçŠ¶æ€æ ‡è¯†
- åç»­æ‰§è¡Œ `cs:version` æ—¶ï¼Œç‰ˆæœ¬å·ä¼šé™„åŠ é¢„å‘å¸ƒæ ‡è¯†
- ä¾‹å¦‚ï¼š`1.0.0` â†’ `1.0.0-alpha.0` â†’ `1.0.0-alpha.1`

##### 1.4.3 æ³¨æ„äº‹é¡¹

- é¢„å‘å¸ƒç‰ˆæœ¬é€šå¸¸ä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒ
- é¢„å‘å¸ƒæ¨¡å¼å¯ä»¥éšæ—¶é€€å‡ºå¹¶æ¢å¤æ­£å¸¸å‘å¸ƒæµç¨‹

#### 1.5 `cs:pre:exit` (`changeset pre exit`): é€€å‡ºé¢„å‘å¸ƒæ¨¡å¼

##### 1.5.1 åŠŸèƒ½æè¿°

ç»“æŸé¢„å‘å¸ƒçŠ¶æ€ï¼Œæ¢å¤æ­£å¸¸ç‰ˆæœ¬å‘å¸ƒæµç¨‹ã€‚

##### 1.5.2 æ‰§è¡Œæ•ˆæœ

- æ¸…é™¤é¢„å‘å¸ƒçŠ¶æ€æ ‡è¯†
- åç»­ç‰ˆæœ¬å·æ¢å¤æ­£å¸¸çš„ semver æ ¼å¼
- éœ€è¦é‡æ–°è¿è¡Œ `cs:version` æ¥ç”Ÿæˆæ­£å¼ç‰ˆæœ¬

##### 1.5.3 é€€å‡ºæµç¨‹

ï¼ˆ1ï¼‰è¿è¡Œ `cs:pre:exit` é€€å‡ºé¢„å‘å¸ƒæ¨¡å¼

ï¼ˆ2ï¼‰è¿è¡Œ `cs:version` ç”Ÿæˆæ­£å¼ç‰ˆæœ¬å·

ï¼ˆ3ï¼‰è¿è¡Œ `cs:release` å‘å¸ƒæ­£å¼ç‰ˆæœ¬

##### 1.5.4 æ³¨æ„äº‹é¡¹

- é€€å‡ºé¢„å‘å¸ƒæ¨¡å¼åï¼Œé¢„å‘å¸ƒç‰ˆæœ¬çš„å˜æ›´é›†ä»ç„¶æœ‰æ•ˆ
- å»ºè®®åœ¨é€€å‡ºå‰ç¡®ä¿æ‰€æœ‰é¢„å‘å¸ƒç‰ˆæœ¬çš„é—®é¢˜éƒ½å·²ä¿®å¤
- é€€å‡ºåæ— æ³•å†å‘å¸ƒç›¸åŒç‰ˆæœ¬çš„é¢„å‘å¸ƒåŒ…

### 2. é…ç½®æ–‡ä»¶è¯¦è§£

é…ç½®æ–‡ä»¶ä½äº `.changeset/config.json`ï¼š

```json
{
  "$schema": "https://unpkg.com/@changesets/config@3.1.1/schema.json",
  "changelog": "@changesets/cli/changelog",
  "commit": false,
  "fixed": [],
  "linked": [],
  "access": "public",
  "baseBranch": "main",
  "updateInternalDependencies": "patch",
  "ignore": []
}
```

#### 2.1 `changelog`

å˜æ›´æ—¥å¿—ç”Ÿæˆå™¨é…ç½®

- è®¾ç½®ä¸º `false` æ—¶ï¼Œæ‰§è¡Œ `version` å‘½ä»¤æ—¶ï¼Œåœ¨ `CHANGELOG.md` æ–‡ä»¶ä¸­åªå£°æ˜ç‰ˆæœ¬å·ï¼Œä¸å£°æ˜å…¶ä»– `Changelog` ä¿¡æ¯
- å¯ä»¥ä½¿ç”¨å†…ç½®çš„ `@changesets/cli/changelog` æˆ–è‡ªå®šä¹‰ç”Ÿæˆå™¨

#### 2.2 `commit`

æ˜¯å¦è‡ªåŠ¨åˆ›å»º Git æäº¤å’Œæ‰“ tag

- ä¸º `true` æ—¶ï¼Œåœ¨æ‰§è¡Œ `change` å’Œ `version` å‘½ä»¤æ—¶ï¼Œå°†è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
  - åˆ›å»º Git æäº¤ï¼Œæäº¤æ¶ˆæ¯æ ¼å¼ä¸ºï¼š`chore: update versions`
  - ä¸ºæ¯ä¸ªæ›´æ–°çš„åŒ…åˆ›å»º Git tagï¼Œtag æ ¼å¼ä¸ºï¼š`åŒ…å@ç‰ˆæœ¬å·`ï¼ˆä¾‹å¦‚ï¼š`@mist/components@1.2.0`ï¼‰
  - è‡ªåŠ¨æ¨é€æäº¤å’Œ tags åˆ°è¿œç¨‹ä»“åº“ï¼ˆå¦‚æœé…ç½®äº†è‡ªåŠ¨æ¨é€ï¼‰
- é»˜è®¤ï¼š`false`
- **æ³¨æ„**ï¼šè‡ªåŠ¨æäº¤åŠŸèƒ½éœ€è¦é…ç½® Git ç”¨æˆ·ä¿¡æ¯ï¼Œä¸”åœ¨ CI/CD ç¯å¢ƒä¸­å¯èƒ½éœ€è¦é¢å¤–çš„æƒé™é…ç½®

#### 2.3 `fixed`

ç”¨äº `monorepo` ä¸­å¯¹åŒ…è¿›è¡Œåˆ†ç»„

- ç›¸åŒåˆ†ç»„ä¸­çš„åŒ…ç‰ˆæœ¬å·å°†è¿›è¡Œç»‘å®šï¼Œæ¯æ¬¡æ‰§è¡Œ `version` å‘½ä»¤æ—¶ï¼ŒåŒä¸€åˆ†ç»„ä¸­çš„åŒ…åªè¦æœ‰ä¸€ä¸ªå‡çº§ç‰ˆæœ¬å·ï¼Œå…¶ä»–ä¼šä¸€èµ·å‡çº§
- æ”¯æŒä½¿ç”¨æ­£åˆ™åŒ¹é…åŒ…åç§°

#### 2.4 `linked`

å’Œ `fixed` ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å¯¹ `monorepo` ä¸­å¯¹åŒ…è¿›è¡Œåˆ†ç»„

- æ¯æ¬¡æ‰§è¡Œ `version` å‘½ä»¤æ—¶ï¼Œåªæœ‰å’Œ `changeset` å£°æ˜çš„å˜æ›´ç›¸å…³çš„åŒ…æ‰ä¼šå‡çº§ç‰ˆæœ¬å·
- åŒä¸€åˆ†ç»„çš„å˜æ›´åŒ…çš„ç‰ˆæœ¬å·å°†ä¿æŒä¸€è‡´
- æ”¯æŒä½¿ç”¨æ­£åˆ™åŒ¹é…åŒ…åç§°

#### 2.5 `access`

å‘å¸ƒæƒé™é…ç½®

- å¦‚æœé…ç½®ä¸º `restricted`ï¼Œå°†ä½œä¸ºç§æœ‰åŒ…å‘å¸ƒ
- å¦‚æœä¸º `public`ï¼Œåˆ™å‘å¸ƒå…¬å…±èŒƒå›´åŒ…

> å¯¹äºä»“åº“ä¸­å­˜åœ¨éƒ¨åˆ†åŒ…éœ€è¦ç‰¹æ®Šé…ç½® accessï¼Œå¯ä»¥åœ¨ `package.json` ä¸­é…ç½® `publishConfig`ï¼š
>
> ```json
> {
>   "publishConfig": {
>     "registry": "https://registry.npmjs.org/",
>     "access": "public"
>   }
> }
> ```

#### 2.6 `baseBranch`

ä»“åº“ä¸»åˆ†æ”¯åç§°

- è¯¥é…ç½®ç”¨äºè®¡ç®—å½“å‰åˆ†æ”¯çš„å˜æ›´åŒ…å¹¶è¿›è¡Œåˆ†ç±»
- é»˜è®¤ï¼š`"main"`

è¿™é‡Œè¦æ”¹æˆè‡ªå·±çš„ä»“åº“ä½¿ç”¨çš„åˆ†æ”¯ï¼Œä¸ç„¶åœ¨ä½¿ç”¨çš„æ—¶å€™å¯èƒ½ä¼šæœ‰è­¦å‘Šï¼š

![image-20250826203438915](./LV10-changesets/img/image-20250826203438915.png)

ä¸Šå›¾è¿™é‡Œå°±æ˜¯ç”¨åˆ†æ”¯æ˜¯masterï¼Œä½†æ˜¯é…ç½®çš„mainã€‚

#### 2.7 `updateInternalDependencies`

ç”¨äºå£°æ˜æ›´æ–°å†…éƒ¨ä¾èµ–çš„ç‰ˆæœ¬å·è§„åˆ™

- å½“æ‰§è¡Œ `version` å‘½ä»¤å‡çº§ç‰ˆæœ¬å·æ—¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ›´æ–°ä»“åº“ä¸­ä½¿ç”¨è¯¥åŒ…çš„ä¾èµ–å£°æ˜
- é…ç½®è¯¥å­—æ®µä¸º `minor` åï¼Œå¦‚æœå‡çº§ç‰ˆæœ¬å·ä¸º `patch` ç±»å‹ï¼Œå°†ä¸ä¼šè‡ªåŠ¨æ›´æ–°å¼•ç”¨ä¾èµ–å£°æ˜

> ä¾‹å¦‚ï¼šå½“é…ç½® `updateInternalDependencies` ä¸º `minor` æ—¶ï¼Œå‡çº§ `pkg-a` è‡³ `1.0.1` æ—¶ï¼Œ`pkg-b` ä¸­çš„ `pkg-a` çš„ä¾èµ–ç‰ˆæœ¬å°†ä¸ä¼šæ›´æ–°ï¼Œåªæœ‰ `pkg-a` å‡çº§ç‰ˆæœ¬å·ä¸º `1.1.0` æˆ–è€… `2.0.0` æ—¶ï¼Œæ‰ä¼šæ›´æ–° `pkg-b` ä¸­çš„ `pkg-a` çš„ä¾èµ–ã€‚

#### 2.8 `ignore`

ç”¨äºå£°æ˜æ‰§è¡Œ version å‘½ä»¤æ—¶å¿½ç•¥çš„åŒ…

- å’Œ `version` å‘½ä»¤çš„ `--ignore` å‚æ•°ç”¨æ³•ä¸€è‡´ï¼Œæ³¨æ„ä¸¤è€…ä¸èƒ½åŒæ—¶ä½¿ç”¨

### 3. å˜æ›´é›†æ–‡ä»¶æ ¼å¼

æ¯ä¸ªå˜æ›´é›†æ˜¯ä¸€ä¸ª Markdown æ–‡ä»¶ï¼Œä½äº `.changeset` ç›®å½•ä¸‹ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```markdown
---
"package-name": patch
---

æè¿°æ­¤æ¬¡å˜æ›´çš„å†…å®¹ï¼Œæ”¯æŒ Markdown æ ¼å¼ã€‚

å¯ä»¥åŒ…å«å¤šè¡Œæè¿°ï¼Œè¯¦ç»†è¯´æ˜å˜æ›´çš„å½±å“å’ŒåŸå› ã€‚
```

ä¸€ä¸ªå˜æ›´é›†æ–‡ä»¶åŒ…å«äº†åœ¨æŸä¸ªåˆ†æ”¯æˆ–è€… `commit` ä¸Šæ”¹åŠ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š

- æœ¬æ¬¡å˜æ›´æ¶‰åŠå“ªäº›åŒ…çš„å˜æ›´
- æœ¬æ¬¡å˜æ›´éœ€è¦å‡çº§çš„ç‰ˆæœ¬å·ç±»å‹ï¼Œç±»å‹ç¬¦åˆ [semver](https://peiyanlu.github.io/vite-press/npm/SemVer) è§„èŒƒ
- æœ¬æ¬¡å˜æ›´çš„ `Changelog` ä¿¡æ¯

è¿™ä¸ªæ–‡ä»¶çš„æœ¬è´¨æ˜¯å¯¹åŒ…çš„ç‰ˆæœ¬å’Œ `Changelog` åšä¸€ä¸ªé¢„å­˜å‚¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™äº›æ–‡ä»¶ä¸­ä¿®æ”¹ä¿¡æ¯ã€‚

**ç‰ˆæœ¬ç±»å‹è¯´æ˜ï¼š**

- `major`: é‡å¤§å˜æ›´ï¼Œä¸å‘åå…¼å®¹
- `minor`: æ–°å¢åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- `patch`: Bug ä¿®å¤ï¼Œå‘åå…¼å®¹

## ä¸‰ã€å·¥ä½œæµç¨‹è¯¦è§£

Changesets çš„å·¥ä½œæµç¨‹æ˜¯ä¸€ä¸ªç²¾ç¡®æ§åˆ¶çš„å‘å¸ƒè¿‡ç¨‹ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

### 1. ç¬¬ä¸€æ¬¡å‘å¸ƒ

å¯¹äºæ–°é¡¹ç›®çš„ç¬¬ä¸€æ¬¡å‘å¸ƒï¼Œéœ€è¦å…ˆæ„å»ºå¹¶ç›´æ¥å‘å¸ƒï¼š

```bash
# æ„å»ºé¡¹ç›®
pnpm run build

# ç›´æ¥å‘å¸ƒ
pnpm changeset publish
```

- `@xxx/xx` å½¢å¼çš„åŒ…ä¼šè¢«å½“ä½œç§æœ‰åŒ…ï¼Œé»˜è®¤éœ€è¦ä»¥ç»„ç»‡çš„æ–¹å¼ç™»å½•ï¼Œå¯ä»¥é€šè¿‡å‚æ•°å‘å¸ƒä¸ºå…¬å…±åŒ…ï¼š

```bash
pnpm publish --access public
```

- `changeset publish` æ—¶æŒ‡å®šå‚æ•°ä¸ç”Ÿæ•ˆï¼Œæ­¤æ—¶å¯ä»¥åœ¨ `package.json` ä¸­æŒ‡å®šé…ç½®ï¼š

```json
{
  "publishConfig": {
    "access": "public"
  }
}
```

- ä¸éœ€è¦å‘å¸ƒçš„åŒ…å¯ä»¥åœ¨ `package.json` ä¸­è®¾ç½®ï¼š

```json
{
  "private": true
}
```

### 2. å¼€å‘é˜¶æ®µ

ï¼ˆ1ï¼‰**å¼€å‘åŠŸèƒ½**ï¼šè¿›è¡Œä»£ç å¼€å‘å’Œä¿®æ”¹

ï¼ˆ2ï¼‰**åˆ›å»ºå˜æ›´é›†**ï¼šè¿è¡Œ `pnpm cs` å‘½ä»¤åˆ›å»ºå˜æ›´é›†

```bash
pnpm cs
```

å…·ä½“å˜æ›´é›†åˆ›å»ºè¿‡ç¨‹å¯ä»¥çœ‹ä¸‹ä¸€èŠ‚ã€‚

### 3. å˜æ›´é›†åˆ›å»ºè¿‡ç¨‹

#### 3.1 æ¨¡å—å·¥ç¨‹æ–¹æ¡ˆ

åœ¨æ ¹ç›®å½•æ‰§è¡Œ `pnpm changeset`ï¼Œé€‰æ‹©æœ¬æ¬¡å˜æ›´éœ€è¦å‡çº§çš„ç‰ˆæœ¬å·ç±»å‹ï¼Œå¡«å…¥ `Changelog` ä¿¡æ¯ï¼Œå¹¶ç‚¹å‡»ä¸¤æ¬¡å›è½¦ï¼Œæ‰§è¡Œå®Œæˆåï¼Œå°†åœ¨é¡¹ç›®çš„ `.changeset` ç›®å½•åˆ›å»ºå¯¹åº”çš„å˜æ›´é›†æ–‡ä»¶

#### 3.2 Monorepo å·¥ç¨‹æ–¹æ¡ˆ

åœ¨æ ¹ç›®å½•æ‰§è¡Œ `pnpm changeset`ï¼Œé€‰æ‹©æœ¬æ¬¡éœ€è¦å‡çº§çš„åŒ…åˆ—è¡¨ï¼Œåˆ†åˆ«é€‰æ‹©ä¸åŒç‰ˆæœ¬ç±»å‹å¯¹åº”çš„åŒ…ï¼Œ`changeset` ä¼šè¯¢é—®ç‰ˆæœ¬å·ç±»å‹ï¼Œå¦‚æœå­˜åœ¨åŒ…æœªé€‰æ‹©è¿™ä¸¤ç§ç±»å‹ï¼Œå°†ä¼šé»˜è®¤ä½¿ç”¨ `patch` ç±»å‹ï¼Œå¡«å…¥ `Changelog` ä¿¡æ¯ï¼Œå¹¶ç‚¹å‡»ä¸¤æ¬¡å›è½¦ï¼Œæ‰§è¡Œå®Œæˆåï¼Œå°†åœ¨é¡¹ç›®çš„ `.changeset` ç›®å½•åˆ›å»ºå¯¹åº”çš„å˜æ›´é›†æ–‡ä»¶

- å‡è®¾ç°åœ¨è¦è¿›è¡Œè¿­ä»£ï¼Œæˆ‘ä»¬ä»ä¸»åˆ†æ”¯ä¸Šåˆ‡ä¸€ä¸ªåˆ†æ”¯å‡ºæ¥ï¼Œå®Œæˆä»£ç ä¿®æ”¹ï¼Œå¦‚æœéœ€è¦å˜æ›´è®°å½•ï¼Œæ‰§è¡Œ `pnpm changeset` å‘½ä»¤ç”Ÿæˆå˜æ›´é›†æ–‡ä»¶ï¼Œæœ€åæäº¤ä»£ç 
- å˜æ›´é›†æ–‡ä»¶éœ€è¦ä¸€å¹¶æäº¤åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚åœ¨åç»­çš„æ–°ç‰ˆæœ¬å‘å¸ƒåï¼Œè¿™äº›å˜æ›´é›†æ–‡ä»¶æ˜¯ä¼šè¢«è‡ªåŠ¨æ¶ˆè€—æ‰çš„

ï¼ˆ3ï¼‰**é€‰æ‹©åŒ…**ï¼šäº¤äº’å¼é€‰æ‹©å—å½±å“çš„åŒ…

ï¼ˆ4ï¼‰**é€‰æ‹©å˜æ›´ç±»å‹**ï¼šé€‰æ‹© major/minor/patch

ï¼ˆ5ï¼‰**å¡«å†™æè¿°**ï¼šè¯¦ç»†æè¿°å˜æ›´å†…å®¹

#### 3.3 ä½¿ç”¨å®ä¾‹

##### 3.3.1 é€‰æ‹©è¦å˜æ›´çš„åŒ…

æˆ‘ä»¬æŒ‰å‰é¢çš„åˆå§‹åŒ–å¥½Changesetsï¼Œç„¶åæ‰§è¡Œ pnpm cså‘½ä»¤ï¼Œä¼šæœ‰ä»¥ä¸‹æç¤ºä¿¡æ¯å‡ºç°ï¼š

![image-20250826203628570](./LV10-changesets/img/image-20250826203628570.png)

è¿™é‡Œå°±ä¼šåˆ—å‡ºå·¥ä½œåŒºæ‰€æœ‰çš„åŒ…ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸‹é¢çš„`vitepress-plugin-doc-analysis`è¿™ä¸ªåŒ…ï¼Œç”¨æ–¹å‘é”®ç§»åŠ¨åˆ°è¿™ä¸ªåŒ…çš„ä½ç½®ï¼Œç„¶åæŒ‰ä¸‹ç©ºæ ¼ï¼š

![image-20250826203750320](./LV10-changesets/img/image-20250826203750320.png)

##### 3.3.2 é€‰æ‹©å˜æ›´ç±»å‹

é€‰æ‹©å®ŒåŒ…ä¹‹åï¼ŒChangesetsä¼šè¯¢é—®ç‰ˆæœ¬å˜æ›´ç±»å‹ï¼š

![image-20250826204717160](./LV10-changesets/img/image-20250826204717160.png)

è¿™é‡Œæ˜¯ä»`major/minor/patch/`ä¸­è®©æˆ‘ä»¬ç¡®è®¤çš„ï¼Œè‹¥æ˜¯majoréœ€è¦æ›´æ–°patchç¼–å·ï¼Œé‚£ä¹ˆå‰ä¸¤ä¸ªå°±ä¸è¦é€‰æ‹©å¯¹åº”çš„åŒ…

> ```markdown
> patch (1.0.0 -> 1.0.1) Bugä¿®å¤ï¼Œå‘åå…¼å®¹çš„å°æ”¹åŠ¨
> minor (1.0.0 -> 1.1.0) æ–°å¢åŠŸèƒ½ï¼Œå‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
> major (1.0.0 -> 2.0.0) é‡å¤§å˜æ›´ï¼Œä¸å‘åå…¼å®¹çš„ç ´åæ€§æ”¹åŠ¨
> ```

æˆ‘è¿™é‡Œé€‰æ‹©çš„å°±æ˜¯æ›´æ–°patchï¼Œç„¶ååœ¨ä¸‹é¢å¡«ä¸Šæè¿°ä¿¡æ¯ï¼š

![image-20250826205103654](./LV10-changesets/img/image-20250826205103654.png)

è¿™ä¸ªä¿¡æ¯æœ€ç»ˆå°†ä¼šåœ¨å¯¹åº”çš„CHANGELOGæ–‡ä»¶ã€‚ç„¶åæœ€åé€‰æ‹©trueå³å¯ã€‚

##### 3.3.3 ç”Ÿæˆå˜æ›´é›†æ–‡ä»¶

å°±ä¼šåœ¨`.changeset`ç›®å½•ç”Ÿæˆä¸€ä¸ªéšæœºå‘½åçš„å˜æ›´é›†æ–‡æ¡£ï¼š

```markdown
---
"@docs-site/vitepress-plugin-doc-analysis": patch
---

æ›´æ–°@docs-site/vitepress-plugin-doc-analysis ç‰ˆæœ¬
```

æ¯æ¬¡å˜æ›´éƒ½ä¼šç”Ÿæˆå•ç‹¬çš„å˜æ›´é›†æ–‡æ¡£ï¼ŒåŒä¸€ä¸ªåŒ…çš„å¤šä¸ªå˜æ›´é›†æ–‡æ¡£æœ€ç»ˆä¼šè¢«åˆå¹¶èµ·æ¥ã€‚

### 4. ç‰ˆæœ¬å‘å¸ƒé˜¶æ®µ

ï¼ˆ6ï¼‰**æ›´æ–°ç‰ˆæœ¬**ï¼šè¿è¡Œ `pnpm cs:version` æ ¹æ®å˜æ›´é›†æ›´æ–°ç‰ˆæœ¬

```bash
pnpm cs:version
```

![image-20250826205644056](./LV10-changesets/img/image-20250826205644056.png)

è¿è¡Œå®Œæ¯•åå°±ä¼šåœ¨å¯¹åº”çš„åŒ…çš„ç›®å½•ç”Ÿæˆä¸€ä¸ªCHANGELOG.mdæ–‡æ¡£ï¼ŒåŒæ—¶`.changeset`ç›®å½•çš„å˜æ›´é›†æ–‡ä»¶ä¼šæ¶ˆå¤±ï¼Œç„¶åå°±ä¼šå‘ç°package.jsonä¸­ç‰ˆæœ¬å·å‘ç”Ÿäº†å˜åŒ–ã€‚

ï¼ˆ7ï¼‰**æ£€æŸ¥å˜æ›´**ï¼šæŸ¥çœ‹ç”Ÿæˆçš„å˜æ›´æ—¥å¿—å’Œç‰ˆæœ¬æ›´æ–°

ï¼ˆ8ï¼‰**å‘å¸ƒç‰ˆæœ¬**ï¼šè¿è¡Œ `pnpm cs:release` å‘å¸ƒæ–°ç‰ˆæœ¬

```bash
pnpm cs:release
```

`changeset` ä¼šæ£€æŸ¥å½“å‰å·¥ä½œåŒºä¸­æ‰€æœ‰åŒ…çš„ç‰ˆæœ¬æ˜¯å¦å·²ç»è¢«å‘å¸ƒè¿‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™è‡ªåŠ¨å‘å¸ƒã€‚

### 5. é¢„å‘å¸ƒæµç¨‹

#### 5.1 è¿›å…¥é¢„å‘å¸ƒæ¨¡å¼

```bash
# å‘å¸ƒ alpha ç‰ˆæœ¬
pnpm changeset pre enter alpha

# å‘å¸ƒ beta ç‰ˆæœ¬
pnpm changeset pre enter beta

# å‘å¸ƒ rc ç‰ˆæœ¬
pnpm changeset pre enter rc
```

#### 5.2 ä¿®æ”¹åŒ…çš„ç‰ˆæœ¬

```bash
pnpm changeset version
```

æ‰§è¡ŒååŒ…çš„ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä»–é¡¹ç›®ä¾èµ–æ­¤åŒ…çš„ç‰ˆæœ¬ä¹Ÿç›¸åº”å‘ç”Ÿå˜åŒ–

#### 5.3 å‘å¸ƒæµ‹è¯•ç‰ˆæœ¬

```bash
# æ„å»ºé¡¹ç›®
pnpm run build

# å‘å¸ƒæµ‹è¯•ç‰ˆæœ¬
pnpm changeset publish
```

#### 5.4 é€€å‡ºé¢„å‘å¸ƒæ¨¡å¼

å‘å¸ƒå‰é€€å‡ºé¢„å‘å¸ƒæ¨¡å¼ï¼š

```bash
pnpm changeset pre exit
```

### 6. æ­£å¼å‘å¸ƒæµç¨‹

ï¼ˆ1ï¼‰**ä¿®æ”¹ç‰ˆæœ¬å·**ï¼š

```bash
pnpm changeset version
```

ï¼ˆ2ï¼‰**å‘å¸ƒæ­£å¼ç‰ˆæœ¬**ï¼š

```bash
pnpm changeset publish
```

### 7. å®Œæ•´æµç¨‹ç¤ºä¾‹

```bash
# 1. å¼€å‘å¹¶æäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 2. åˆ›å»ºå˜æ›´é›†
pnpm cs
# é€‰æ‹©åŒ…: @mist/components
# é€‰æ‹©å˜æ›´ç±»å‹: minor
# æè¿°: æ·»åŠ æ–°çš„æŒ‰é’®ç»„ä»¶å˜ä½“

# 3. æ›´æ–°ç‰ˆæœ¬
pnpm cs:version

# 4. æ£€æŸ¥å˜æ›´
git status
git diff

# 5. æäº¤ç‰ˆæœ¬æ›´æ–°
git add .
git commit -m "chore: update versions"

# 6. å‘å¸ƒ
pnpm cs:release
```

## å››ã€å˜æ›´é›†è§„èŒƒ

### 1. å˜æ›´é›†æ–‡ä»¶è§„èŒƒ

æ¯ä¸ªå˜æ›´é›†æ–‡ä»¶å¿…é¡»åŒ…å«ï¼š

- **Frontmatter**: ä½¿ç”¨ YAML æ ¼å¼æŒ‡å®šåŒ…å’Œå˜æ›´ç±»å‹
- **æè¿°å†…å®¹**: è¯¦ç»†æè¿°å˜æ›´å†…å®¹ï¼Œä½¿ç”¨ Markdown æ ¼å¼

### 2. å˜æ›´é›†ç¤ºä¾‹

#### 2.1 ç¤ºä¾‹ 1ï¼šåŠŸèƒ½æ–°å¢

```markdown
---
"@mist/components": minor
---

æ·»åŠ æ–°çš„ PrimaryButton ç»„ä»¶ï¼Œæ”¯æŒå¤šç§å°ºå¯¸å’Œä¸»é¢˜å˜ä½“ã€‚

- æ”¯æŒ small/medium/large ä¸‰ç§å°ºå¯¸
- æ”¯æŒ primary/secondary ä¸¤ç§ä¸»é¢˜
- æ·»åŠ å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ–‡æ¡£
```

#### 2.2 ç¤ºä¾‹ 2ï¼šBug ä¿®å¤

```markdown
---
"@mist/utils": patch
---

ä¿®å¤æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°åœ¨å¤„ç†é—°å¹´æ—¶çš„é”™è¯¯ã€‚

å…·ä½“é—®é¢˜ï¼š2æœˆ29æ—¥æ ¼å¼åŒ–æ—¶ä¼šå‡ºç°æ—¥æœŸåç§»ï¼Œç°å·²ä¿®å¤ã€‚
```

#### 2.3 ç¤ºä¾‹ 3ï¼šé‡å¤§å˜æ›´

```markdown
---
"@mist/core": major
---

é‡æ„äº‹ä»¶ç³»ç»Ÿï¼Œä¸å†æ”¯æŒæ—§çš„äº‹ä»¶ç›‘å¬æ–¹å¼ã€‚

**ç ´åæ€§å˜æ›´ï¼š**

- ç§»é™¤ `on()` æ–¹æ³•ï¼Œæ”¹ä¸ºä½¿ç”¨ `addEventListener()`
- äº‹ä»¶åç§°ç»Ÿä¸€ä½¿ç”¨ camelCase æ ¼å¼
- éœ€è¦æ›´æ–°æ‰€æœ‰ä½¿ç”¨äº‹ä»¶ç›‘å¬çš„ä»£ç 
```

## äº”ã€ç”Ÿæˆæ ¼å¼ç¤ºä¾‹

### 1. ä¸€èˆ¬æ ¼å¼ç¤ºä¾‹

**å˜æ›´é›†æ–‡ä»¶ï¼š**

```markdown
---
"@mist/components": minor
"@mist/utils": patch
---

æ·»åŠ æ–°çš„æ¨¡æ€æ¡†ç»„ä»¶å¹¶ä¿®å¤å·¥å…·å‡½æ•°ä¸­çš„æ—¥æœŸå¤„ç†é—®é¢˜ã€‚
```

**ç”Ÿæˆçš„ CHANGELOG.mdï¼š**

```markdown
# @mist/components

## 1.2.0

### Minor Changes

- æ·»åŠ æ–°çš„æ¨¡æ€æ¡†ç»„ä»¶ ([a1b2c3d](https://github.com/owner/repo/commit/a1b2c3d))

# @mist/utils

## 1.1.1

### Patch Changes

- ä¿®å¤æ—¥æœŸå¤„ç†å‡½æ•° ([d4e5f6g](https://github.com/owner/repo/commit/d4e5f6g))
- Updated dependencies [a1b2c3d]:
  - @mist/components@1.2.0
```

### 2. å¤šåŒ…ååŒç¤ºä¾‹

**å¤šä¸ªç›¸å…³å˜æ›´é›†ï¼š**

```markdown
---
"@mist/core": minor
"@mist/components": minor
---

é‡æ„ä¸»é¢˜ç³»ç»Ÿï¼Œæ‰€æœ‰ç»„ä»¶æ”¯æŒæ–°çš„ä¸»é¢˜é…ç½®ã€‚
```

**ç”Ÿæˆçš„å˜æ›´æ—¥å¿—ä¼šæ˜¾ç¤ºä¾èµ–å…³ç³»ï¼š**

```markdown
# @mist/components

## 2.1.0

### Minor Changes

- æ”¯æŒæ–°çš„ä¸»é¢˜é…ç½®ç³»ç»Ÿ ([e7f8g9h](https://github.com/owner/repo/commit/e7f8g9h))

### Patch Changes

- Updated dependencies [e7f8g9h]:
  - @mist/core@2.1.0
```

### 3. æ–‡ä»¶å¤„ç†æœºåˆ¶

- **å˜æ›´é›†æ–‡ä»¶ä½ç½®**: æ‰€æœ‰å˜æ›´é›†æ–‡ä»¶å­˜å‚¨åœ¨ `.changeset` ç›®å½•ä¸‹
- **æ–‡ä»¶å‘½å**: ä½¿ç”¨éšæœºç”Ÿæˆçš„åç§°ï¼Œå¦‚ `quick-lions-study.md`
- **æ–‡ä»¶æ¸…ç†**: åœ¨ `changeset version` æ‰§è¡Œåï¼Œå·²å¤„ç†çš„å˜æ›´é›†æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤
- **ç‰ˆæœ¬è¿½è¸ª**: æ¯ä¸ªå˜æ›´é›†éƒ½ä¼šç”Ÿæˆå¯¹åº”çš„ Git æäº¤å“ˆå¸Œé“¾æ¥

## å…­ã€Changesets é€‚ç”¨åœºæ™¯

### 1. ä¸»è¦é€‚ç”¨åœºæ™¯

ï¼ˆ1ï¼‰**Monorepo é¡¹ç›®**ï¼šå¤šåŒ…ç®¡ç†çš„å¤æ‚é¡¹ç›®ç»“æ„

ï¼ˆ2ï¼‰**ç²¾ç¡®ç‰ˆæœ¬æ§åˆ¶**ï¼šéœ€è¦æ‰‹åŠ¨å®¡æ ¸æ¯ä¸ªå˜æ›´çš„åœºæ™¯

ï¼ˆ3ï¼‰**å›¢é˜Ÿåä½œ**ï¼šå¤šä¸ªå¼€å‘è€…åŒæ—¶ä¿®æ”¹ä¸åŒåŒ…çš„é¡¹ç›®

ï¼ˆ4ï¼‰**å¤æ‚ä¾èµ–å…³ç³»**ï¼šåŒ…ä¹‹é—´å­˜åœ¨å¤æ‚çš„ä¾èµ–å…³ç³»éœ€è¦åè°ƒ

ï¼ˆ5ï¼‰**é¢„å‘å¸ƒç®¡ç†**ï¼šéœ€è¦çµæ´»çš„é¢„å‘å¸ƒå’Œæµ‹è¯•æµç¨‹

### 2. ä¸ Standard-Version å¯¹æ¯”

| ç‰¹æ€§     | Changesets       | Standard-Version     |
| -------- | ---------------- | -------------------- |
| é€‚ç”¨é¡¹ç›® | Monorepo         | å•åŒ…é¡¹ç›®             |
| å˜æ›´æ§åˆ¶ | æ‰‹åŠ¨åˆ›å»ºå˜æ›´é›†   | è‡ªåŠ¨åˆ†ææäº¤å†å²     |
| ç‰ˆæœ¬ç­–ç•¥ | ç²¾ç¡®æ§åˆ¶æ¯ä¸ªå˜æ›´ | åŸºäºæäº¤ç±»å‹è‡ªåŠ¨å†³å®š |
| å·¥ä½œæµç¨‹ | å˜æ›´é›†é©±åŠ¨       | æäº¤å†å²é©±åŠ¨         |
| å­¦ä¹ æ›²çº¿ | è¾ƒé«˜             | è¾ƒä½                 |
| çµæ´»æ€§   | é«˜               | ä¸­ç­‰                 |

## ä¸ƒã€æ•…éšœæ’é™¤

### 1. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

**é—®é¢˜ 1ï¼šå˜æ›´é›†æ–‡ä»¶æœªè¢«è¯†åˆ«**

- åŸå› ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®æˆ–ä½ç½®é”™è¯¯
- è§£å†³ï¼šç¡®ä¿å˜æ›´é›†æ–‡ä»¶åœ¨ `.changeset` ç›®å½•ä¸‹ï¼Œä¸”æ ¼å¼æ­£ç¡®

**é—®é¢˜ 2ï¼šç‰ˆæœ¬æ›´æ–°å¤±è´¥**

- åŸå› ï¼šåŒ…åé…ç½®é”™è¯¯æˆ–æƒé™é—®é¢˜
- è§£å†³ï¼šæ£€æŸ¥ `package.json` ä¸­çš„åŒ…åå’Œè®¿é—®æƒé™

**é—®é¢˜ 3ï¼šä¾èµ–å…³ç³»æœªæ­£ç¡®æ›´æ–°**

- åŸå› ï¼š`updateInternalDependencies` é…ç½®ä¸å½“
- è§£å†³ï¼šè°ƒæ•´é…ç½®ä¸º `patch` æˆ– `minor`

**é—®é¢˜ 4ï¼šå‘å¸ƒæƒé™é—®é¢˜**

- åŸå› ï¼š`@xxx/xx` å½¢å¼çš„åŒ…è¢«å½“ä½œç§æœ‰åŒ…
- è§£å†³ï¼šåœ¨ `package.json` ä¸­é…ç½® `publishConfig.access: "public"`

### 2. è°ƒè¯•æŠ€å·§

ï¼ˆ1ï¼‰ä½¿ç”¨ `--verbose` æ ‡å¿—è·å–è¯¦ç»†è¾“å‡ºï¼š

```bash
pnpm cs:version --verbose
```

ï¼ˆ2ï¼‰æ£€æŸ¥å˜æ›´é›†æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®

ï¼ˆ3ï¼‰éªŒè¯åŒ…åå’Œç‰ˆæœ¬å·é…ç½®

ï¼ˆ4ï¼‰æŸ¥çœ‹ç”Ÿæˆçš„ CHANGELOG.md æ–‡ä»¶å†…å®¹

ï¼ˆ5ï¼‰æ£€æŸ¥ Git çŠ¶æ€ç¡®è®¤æ‰€æœ‰æ–‡ä»¶å·²æ­£ç¡®æäº¤

### 3. æœ€ä½³å®è·µ

ï¼ˆ1ï¼‰**åŠæ—¶åˆ›å»ºå˜æ›´é›†**ï¼šåœ¨å®ŒæˆåŠŸèƒ½å¼€å‘åç«‹å³åˆ›å»ºå˜æ›´é›†

ï¼ˆ2ï¼‰**è¯¦ç»†æè¿°å˜æ›´**ï¼šåœ¨å˜æ›´é›†ä¸­æä¾›è¶³å¤Ÿè¯¦ç»†çš„ä¿¡æ¯

ï¼ˆ3ï¼‰**å®šæœŸæ¸…ç†å˜æ›´é›†**ï¼šç¡®ä¿å·²å¤„ç†çš„å˜æ›´é›†æ–‡ä»¶è¢«æ­£ç¡®æ¸…ç†

ï¼ˆ4ï¼‰**æµ‹è¯•é¢„å‘å¸ƒç‰ˆæœ¬**ï¼šå……åˆ†åˆ©ç”¨é¢„å‘å¸ƒåŠŸèƒ½è¿›è¡Œæµ‹è¯•

ï¼ˆ5ï¼‰**å›¢é˜Ÿåä½œè§„èŒƒ**ï¼šå»ºç«‹å›¢é˜Ÿå†…çš„å˜æ›´é›†åˆ›å»ºå’Œå®¡æ ¸æµç¨‹

ï¼ˆ6ï¼‰**æƒé™é…ç½®**ï¼šå¯¹äºéœ€è¦ç‰¹æ®Šæƒé™çš„åŒ…ï¼Œåœ¨ `package.json` ä¸­æ­£ç¡®é…ç½® `publishConfig`

## å…«ã€é«˜çº§é…ç½®

### 1. è‡ªå®šä¹‰å˜æ›´æ—¥å¿—ç”Ÿæˆå™¨

å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„å˜æ›´æ—¥å¿—ç”Ÿæˆå™¨ï¼š

```javascript
// .changeset/changelog-config.js
module.exports = {
  getReleaseLine: async (changeset, type) => {
    // è‡ªå®šä¹‰å˜æ›´æ—¥å¿—è¡Œæ ¼å¼
  },
  getDependencyReleaseLine: async (changeset, dependencyChanges) => {
    // è‡ªå®šä¹‰ä¾èµ–å˜æ›´è¡Œæ ¼å¼
  },
};
```

### 2. GitHub Actions é›†æˆ

å¯ä»¥é…ç½® GitHub Actions è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ï¼š

```yaml
name: Release
on:
  push:
    branches: [main]
jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - uses: actions/setup-node@v4
      - run: pnpm install
      - run: pnpm cs:version
      - run: pnpm cs:release
```

### 3. ç‰ˆæœ¬ç­–ç•¥é…ç½®

æ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ï¼š

```json
{
  "updateInternalDependencies": "minor",
  "___experimentalUnsafeOptions_WILL_CHANGE_IN_PATCH": {
    "onlyUpdatePeerDependentsWhenOutOfRange": true
  }
}
```

é€šè¿‡åˆç†çš„é…ç½®å’Œä½¿ç”¨ï¼ŒChangesets å¯ä»¥æˆä¸º monorepo é¡¹ç›®ç‰ˆæœ¬ç®¡ç†çš„å¼ºå¤§å·¥å…·ï¼Œæä¾›ç²¾ç¡®çš„ç‰ˆæœ¬æ§åˆ¶å’Œçµæ´»çš„å‘å¸ƒæµç¨‹ã€‚
